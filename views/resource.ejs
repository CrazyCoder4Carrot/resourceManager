<!DOCTYPE html>
<!-- saved from url=(0040)http://getbootstrap.com/examples/signin/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="img/favicon.ico">
<title>Asset Management</title>
<script src="/bower_components/jquery/dist/jquery.js"></script>
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Bootstrap core CSS -->
<link href="/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="css/signin.css" rel="stylesheet">

<script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="/app/bower_components/moment/min/moment.min.js"></script>
<script type="text/javascript" src="app/bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="/app/bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />

<link rel="stylesheet" type="text/css" href="/DataTables-1.10.7/media/css/jquery.dataTables.css">
  
<!-- jQuery -->
<!-- <script type="text/javascript" charset="utf8" src="/DataTables-1.10.7/media/js/jquery.js"></script> -->
  
<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="/DataTables-1.10.7/media/js/jquery.dataTables.js"></script>
<script>
      $(document).ready( function () {
    $('#mytable').DataTable();

} );
$('#mytable').dataTable( {
  "autoWidth": true
} );
// $('#mytable').dataTable( {
//     { "width": "2%", "targets": 0 },
//      { "width": "10%", "targets": 1 },
//       { "width": "5%", "targets": 2 },
//        { "width": "6%", "targets": 3 },
//         { "width": "7%", "targets": 4 },
//          { "width": "5%", "targets": 5 },
//           { "width": "5%", "targets": 6 },
//            { "width": "5%", "targets":  7},
//             { "width": "5%", "targets": 8 },
//              { "width": "5%", "targets": 9 },
//               { "width": "5%", "targets": 10 },
//                { "width": "5%", "targets": 11 },
//                { "width": "5%", "targets": 12 },
//                { "width": "6%", "targets": 13 },
//                { "width": "7%", "targets": 14 }

//   ]
// } );

function setCheckedValue(radioObj, newValue) {
  if(!radioObj)
    return;
  var radioLength = radioObj.length;
  if(radioLength == undefined) {
    radioObj.checked = (radioObj.value == newValue.toString());
    return;
  }
  for(var i = 0; i < radioLength; i++) {
    radioObj[i].checked = false;
    if(radioObj[i].value == newValue.toString()) {
      radioObj[i].checked = true;
    }
  }
}
$(function(){
  $('button#Edit').on('click', function(){
    var id = $(event.target).closest('tr').find('#id').text();
    var name = $(event.target).closest('tr').find('#name').text();
    var type = $(event.target).closest('tr').find('#type').text(); 
    var size = $(event.target).closest('tr').find("#size").text();
    var serverId = $(event.target).closest('tr').find("#serverId").text();
    var userId = $(event.target).closest("tr").find("#userId").text();
    var teamId = $(event.target).closest("tr").find("#teamId").text();
    var location = $(event.target).closest("tr").find("#location").text();
    var position = $(event.target).closest("tr").find("#position").text();
    var createtime =$(event.target).closest("tr").find("#createtime").text();
    var discard = $(event.target).closest("tr").find("#discard").text();
          $(".modal-title").text("Edit asset");
          $("#modalform").attr("action","resource/update");
          $("#inputName").val(name);
          $("#inputType").val(type);
          $("#inputSize").val(size);
          $("#inputServerId").val(serverId);
          $("#inputUserId").val(userId);
          $('#inputTeamId').val(teamId);
          $('#inputLocation').val(location);
          $('#inputPosition').val(position);
          $('#inputCreateTime').val(createtime);
         console.log($('#inputDiscard'));
         var radiobutton = $('#inputDiscard');
          setCheckedValue(document.forms['modalform'].elements['inputDiscard'],discard)
          $("#inputId").val(id);
        });
});

$(function(){
  $('button#Transfer').on('click', function(){
    var id = $(event.target).closest('tr').find('#id').text();
    var type = $(event.target).closest('tr').find('#type').text(); 
    $("#assetId").val(id);
    $("#assetType").val(type);
        });
});

      $(function(){
        $('button#Add').on('click', function(){
          $(".modal-title").text("Add asset");
          $("#modalform").attr("action","resource/add");
          $("#inputName").val("");
          $("#inputType").val("");
          $("#inputSize").val("");
          $("#inputServerId").val("");
          $("#inputUserId").val("");
          $('#inputTeamId').val("");
          $('#inputLocation').val("");
          $('#inputPosition').val("");
          $('#inputCreateTime').val("");
          $('#inputDiscard').val("");
        });
        });
</script>
</head>

<body>
  <% include nav %>
  <div class = "container">
    <h1>Asset Managment</h1>
<!--     <form class="form-inline">
      <select>
        <option>All</option>
        <option>Server</option>
        <option>Switch</option>
        <option>Memory</option>
        <option>Disk</option>
      </select>
      <button type="submit" class="btn btn-primary btn-lg">Search</button>
    </form> -->
    <form method="post" enctype="multipart/form-data" action="/resource/file-upload">
  <input id="fulAvatar" name="fulAvatar" type="file" class="form-control" />   
  <input type="submit" class="btn btn-lg btn-primary" id="btnSub">
</form>
    <div class="table-responsive">
      <table id = "mytable"class="display" >
        <thead>
          <tr>
            <th style="width:5%">
            </th>
            <th style="width:5%" >Id</th>
            <th style="width:6%" >Name</th>
            <th style="width:5%" >Type</th>
            <th style="width:10%" >Size</th>
            <th style="width:10%" >Server</th>
            <th style="width:10%" >User</th>
            <th style="width:10%" >Team</th>
            <th style="width:10%" >Location</th>
            <th style="width:9%" >Position</th>
            <th style="width:15%" >Create Time</th>
            <th style="width:15%" >Discard</th>
            <th style="width:5%"  >Del</th>
            <th style="width:5%"  >Edit</th>
            <th style="width:5%" >Trans</th>
          </tr>
        </thead>
        <tbody>
          <% allResourceInfo.forEach(function(resourceInfo) { %>
          <tr>
           <td>
             <input class="no-margin" type="checkbox">
           </td>
           <td id="id"><%= resourceInfo.id %></td>
           <td id="name"><%= resourceInfo.name %></td>
           <td class="hidden-phone" id="type"><%= resourceInfo.type %></td>
           <td class="hidden-phone" id="size"><%= resourceInfo.size %></td>
           <td class="hidden-phone" id="serverId"><%= resourceInfo.serverId %></td>
           <td class="hidden-phone" id="userId"><%= resourceInfo.userId %></td>
           <td class="hidden-phone" id="teamId"><%= resourceInfo.teamId %></td>
           <td class="hidden-phone" id="location"><%= resourceInfo.location %></td>
           <td class="hidden-phone" id="position"><%= resourceInfo.position %></td>
           <td class="hidden-phone" id="createtime"><%= moment(resourceInfo.createtime).format('YYYY-MM-DD HH:MM:SS')%></td>
           <td class="hidden-phone" id="discard"><%= resourceInfo.discard %></td>
           <td class="hidden-phone">
             <div class="btn-group"><a href="\resource\delete\<%= resourceInfo.id %>" class="btn btn-primary">Delete</a>
             </div>
           </td>
           <td class="hidden-phone"><button class="btn btn-primary" data-toggle="modal" data-target="#myModal" id="Edit">Edit</a>
             <td class="hidden-phone"><button class="btn btn-primary" data-toggle="modal" data-target="#TransferModal" id="Transfer">Transfer</a>
             </td>
           </tr>
           <% }); %>



         </tbody>
       </table>
     </div>
     <div class="form-actions">
      <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" id="Add">
        Add
      </button>
      <button class="btn btn-lg btn-primary" type="submit">Delete</button>
      <button class="btn btn-lg btn-primary" type="submit" data-target="#TransferModal" id="Transfer">Transfer</button>
    </div>


    <!-- Edit Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Add Asset</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal" action="/resource/add" method="post" id="modalform">
              <input type="hidden" id="inputId"  name="id">
              <div class="control-group">
                <label class="control-label" for="inputName">Name</label>
                <div class="controls">
                  <input type="text" id="inputName" placeholder="Name" name="name">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="inputType">Type</label>
                <div class="controls">
<!--                   <input type="text" id="inputType" placeholder="Type" name="type"> -->
                  <select  name="type" id="inputType">
                    <option>Server</option>
                    <option>Memory</option>
                    <option>Disk</option>
                    <option>Switch</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="inputSize">Size</label>
                <div class="controls">
                  <input type="text" id="inputSize" placeholder="Size" name="size">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="inputServerId">Server</label>
                <div class="controls">
                  <select  name="serverId" id="inputServerId">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                  </select>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="inputUserId">User</label>
                <div class="controls">
                  <select name="userId" id="inputUserId">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                  </select>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="inputTeamId">Team</label>
                <div class="controls">
                  <select  name="teamId" id="inputTeamId">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="inputLocation">Location</label>
                <div class="controls">
                  <input type="text" id="inputLocation" placeholder="Location" name="location">
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="inputPosition">Position</label>
                <div class="controls">
                  <input type="text" id="inputPosition" placeholder="Position" name="position">
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="inputCreateTime">CreateTime</label>
                <div class="controls">
                  <div class="row">
                    <div class='col-sm-6'>
                      <div class="form-group">
                        <div class='input-group date' id='datetimepicker1'>
                          <input type='text' class="form-control" id="inputCreateTime" name="createtime" />
                          <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                          </span>
                        </div>
                      </div>
                    </div>
                    <script type="text/javascript">
                    $(function () {
                      $('#datetimepicker1').datetimepicker(
                      {
                        format:"YYYY-MM-DD HH:MM:SS"
                      });
                    });
                    </script>
                  </div>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="inputDiscard">Discard</label>
                <div class="controls">
                  <input type="radio" name="discard" value="1" id="inputDiscard"/> Yes
                  <input type="radio" name="discard" value="0" id="inputDiscard"/> No
                </div>
              </div>
              <div class="modal-footer">
                <input type="submit" class="btn btn-primary" value="Save changes"></input>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>

            </form>
          </div>

        </div>
      </div>
    </div>

    <!-- Transfer Modal -->
    <div class="modal fade" id="TransferModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Add Asset</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal" action="/resource/addtrans" method="post" id="modalform">
              <input type="hidden" id="assetId"  name="id">
              <input type="hidden" id="assetType"  name="type">
              <div class="control-group">
                <label class="control-label" for="inputTeamId">Name</label>
                <div class="controls">
                  <select  name="dest" id="inputTeamId">
                  <% allUsers.forEach(function(userInfo) { %>
                    <option><%= userInfo.username %></option>
                  <% }); %>
                  </select>
                </div>
              </div>
              </div>
              <div class="modal-footer">
                <input type="submit" class="btn btn-primary" value="Transfer"></input>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>

            </form>
          </div>

        </div>
      </div>
    </div>



  </body>